(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(54),i=n.n(a),u=n(2),o=n(3),s=(n(33),n(0)),l=function(e){var t=e.history;return Object(s.jsxs)("div",{id:"menu",children:[Object(s.jsx)("h1",{children:"Connect 4 Online"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/ai")},children:"Play against AI"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/create")},children:"Create Game"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/join")},children:"Join Game"})]})},j=n(55),f=n.n(j)()("/"),b=(n(50),function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(u.a)(a,2),o=i[0],l=i[1];return o?null:Object(s.jsxs)("div",{className:"form",children:[Object(s.jsx)("h1",{children:"Create Game"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(!0),f.emit("create-game",{nickName:n})},children:[Object(s.jsx)("label",{htmlFor:"nickName",children:"Enter Nick Name"}),Object(s.jsx)("input",{autoComplete:"off",onChange:function(e){c(e.target.value)},type:"text",id:"nickName"}),Object(s.jsx)("button",{children:"Submit"})]})]})}),d=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(u.a)(a,2),o=i[0],l=i[1],j=Object(r.useState)(!1),b=Object(u.a)(j,2),d=b[0],m=b[1],h=Object(r.useState)(!1),O=Object(u.a)(h,2),x=O[0],g=O[1];Object(r.useEffect)((function(){return f.on("error",(function(e){m(e),g(!1)})),function(){return f.off("error")}}),[]);return x?null:Object(s.jsxs)("div",{className:"form",children:[Object(s.jsx)("h1",{children:"Join Game"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(!0),f.emit("join-game",{nickName:n,joinID:o})},children:[d&&Object(s.jsx)("div",{class:"error",children:d}),Object(s.jsx)("label",{htmlFor:"nickName",children:"Enter Nick Name"}),Object(s.jsx)("input",{autoComplete:"off",value:n,onChange:function(e){c(e.target.value)},type:"text",id:"nickName"}),Object(s.jsx)("label",{htmlFor:"gameID",children:"Enter Room ID"}),Object(s.jsx)("input",{autoComplete:"off",value:o,onChange:function(e){l(e.target.value)},type:"text",id:"gameID"}),Object(s.jsx)("button",{children:"Submit"})]})]})},m=(n(93),function(e){var t=e.gameID,n=e.nickName,c=Object(r.useRef)(null),a=Object(r.useState)(""),i=Object(u.a)(a,2),o=i[0],l=i[1],j=Object(r.useState)([]),b=Object(u.a)(j,2),d=b[0],m=b[1];Object(r.useEffect)((function(){return f.on("message",(function(e){m((function(t){return t.concat([e])}))})),function(){return f.off("message")}}),[]),Object(r.useEffect)((function(){c.current.scrollIntoView({behavior:"smooth"})}),[d]);return Object(s.jsxs)("div",{id:"message-div",children:[Object(s.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==o){var r=n+": "+o;m((function(e){return e.concat([r])})),l(""),f.emit("message",{gameID:t,message:r})}},children:[Object(s.jsx)("label",{htmlFor:"message",children:"Send Message: "}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{autoComplete:"off",type:"text",id:"message",value:o,onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("button",{children:"Send"})]}),Object(s.jsxs)("div",{id:"messages",children:[d.map((function(e,t){return Object(s.jsx)("p",{children:e},t)})),Object(s.jsx)("div",{ref:c})]})]})}),h=(n(94),function(e){var t=e.playerID,n=e.players;return Object(s.jsxs)("div",{id:"playerlist",children:[Object(s.jsx)("h1",{children:"Players: "}),n.map((function(e){return function(e){return""!==e.colour?Object(s.jsx)("h2",{className:e.colour+" highlighted",children:e.nickName+(e._id===t?" (you)":"")},e._id.toString()):Object(s.jsx)("h2",{className:"highlighted",children:e.nickName+(e._id===t?" (you)":"")},e._id.toString())}(e)}))]})}),O=(n(51),function(e){var t=e.gameID,n=Object(r.useState)(!1),c=Object(u.a)(n,2),a=c[0],i=c[1];return a?null:Object(s.jsx)("button",{id:"start-button",onClick:function(){i(!0),f.emit("start-game",{gameID:t})},children:"Start Game"})}),x=function(e){var t=e.game,n=e.player,r=e.gameOutcome;return Object(s.jsxs)("div",{id:"info",children:[r?Object(s.jsx)("h2",{children:r}):null,t.hasStarted&&(n.colour===t.turn?Object(s.jsx)("h2",{className:n.colour+" highlighted",children:"Your turn"}):Object(s.jsx)("h2",{className:(n.colour,("yellow"===n.colour?"red":"yellow")+" highlighted"),children:"Opponent's turn"})),!t.hasStarted&&(2===t.players.length?n.isHosting?Object(s.jsx)(O,{gameID:t._id.toString()}):Object(s.jsx)("h2",{children:"Waiting for host to start..."}):Object(s.jsx)("h2",{children:"Waiting for another player..."}))]})},g=n(15),v=n(24),p=(n(52),function(e,t,n,r){for(var c=0;c<n;c++)for(var a=0;a<=r-4;a++)if(t[c][a]===e&&t[c][a+1]===e&&t[c][a+2]===e&&t[c][a+3]===e)return!0;for(var i=0;i<r;i++)for(var u=0;u<=n-4;u++)if(t[u][i]===e&&t[u+1][i]===e&&t[u+2][i]===e&&t[u+3][i]===e)return!0;for(var o=0;o<=n-4;o++)for(var s=0;s<=r-4;s++)if(t[o][s]===e&&t[o+1][s+1]===e&&t[o+2][s+2]===e&&t[o+3][s+3]===e)return!0;for(var l=3;l<n;l++)for(var j=0;j<=r-4;j++)if(t[l][j]===e&&t[l-1][j+1]===e&&t[l-2][j+2]===e&&t[l-3][j+3]===e)return!0;return!1}),y=function(e,t,n){for(var r=0;r<t;r++)for(var c=0;c<n;c++)if(""===e[r][c])return!1;return!0},S=function(e){var t=e.game,n=e.setGame,c=e.playerColour,a=e.setGameOutcome,i=e.setTimer,o=e.setIsTimerPaused,l=function(){for(var e=new Array(7),t=0;t<7;t++)e[t]=new Array(6).fill("");return e},j=Object(r.useState)(l()),b=Object(u.a)(j,2),d=b[0],m=b[1];Object(r.useEffect)((function(){return f.on("restart",(function(){a(null),m(l())})),f.on("update-board",(function(e){var t=e.row,n=e.col,r=e.colour;m((function(e){return e[n][t]=r,e}))})),function(){f.off("restart"),f.off("update-board")}}),[a]),Object(r.useEffect)((function(){return f.on("make-move",(function(e){var n=e.turnID;if(t.hasStarted&&n===t.turnID&&t.turn===c){var r=function(e,t,n){for(;;)for(var r=n-1,c=Math.floor(Math.random()*t);r>=0;){if(""===e[c][r])return{row:r,col:c};r--}}(d,7,6);h(r.row,r.col)}})),function(){return f.off("make-move")}}),[t,c,d]);var h=function(e,r){d[r][e]=c,m(Object(v.a)(d));var u=t._id.toString();f.emit("update-board",{gameID:u,row:e,col:r,colour:c}),p(c,d,7,6)?(t.hasStarted=!1,a("You won!"),f.emit("game-over",{gameID:u,result:"You lost!"})):y(d,7,6)?(t.hasStarted=!1,a("Draw"),f.emit("game-over",{gameID:u,result:"Draw!"})):(t.turn="red"===t.turn?"yellow":"red",f.emit("change-turn",{gameID:u}),i(t.turnTime),o(!0)),n(Object(g.a)({},t))};return Object(s.jsx)("div",{id:"board",children:d.map((function(e,n){return Object(s.jsx)("div",{className:"col",onClick:function(){return function(e){if(t.hasStarted&&t.turn===c)for(var n=5;n>=0;){if(""===d[e][n])return void h(n,e);n--}}(n)},children:d[n].map((function(e,t){return function(e,t,n){return""!==e?Object(s.jsx)("div",{className:"cell "+e},t+","+n):Object(s.jsx)("div",{className:"cell"},t+","+n)}(e,n,t)}))},n)}))})},k=function(e){var t=e.timer,n=e.setTimer,c=e.isTimerPaused,a=e.startTime;return Object(r.useEffect)((function(){if(!c){var e=((new Date).getTime()-a)/1e3,t=1e3*(1-(e-Math.floor(e))),r=setTimeout((function(){n((function(e){return e-1}))}),t);return function(){return clearTimeout(r)}}})),Object(s.jsx)("h2",{children:t<0?0:t})},C=(n(95),function(e){var t=e.game,n=e.setGame,c=e.players,a=function(e){for(var t=0;t<e.length;t++)if(e[t].socketID===f.id)return e[t];return{_id:""}}(c),i=Object(r.useState)(null),l=Object(u.a)(i,2),j=l[0],b=l[1],d=Object(r.useState)(null),O=Object(u.a)(d,2),g=O[0],v=O[1],p=Object(r.useState)(!1),y=Object(u.a)(p,2),C=y[0],D=y[1];return Object(r.useEffect)((function(){return f.on("game-over",(function(e){return b(e)})),f.on("update-timer",(function(e){v(e),D(!1)})),function(){f.off("game-over"),f.off("update-timer"),""!==a._id&&f.emit("leave-game")}}),[a._id]),""===a._id?Object(s.jsx)(o.a,{to:"/"}):Object(s.jsxs)("div",{id:"game",children:[Object(s.jsxs)("h2",{children:["Game Code: ",t.joinID]}),Object(s.jsx)(x,{game:t,player:a,gameOutcome:j}),t.hasStarted&&Object(s.jsx)(k,{timer:g,setTimer:v,isTimerPaused:C,startTime:t.turnStartTime}),Object(s.jsxs)("div",{id:"main",children:[Object(s.jsx)(h,{playerID:a._id,players:c}),Object(s.jsx)(S,{game:t,setGame:n,playerColour:a.colour,setGameOutcome:b,setTimer:v,setIsTimerPaused:D}),Object(s.jsx)(m,{gameID:t._id.toString(),nickName:a.nickName})]})]})}),D=function(){return Math.floor(2*Math.random())},N=function(e){var t=e.game,n=e.setGame,c=e.setYourColour,a=e.setAiColour,i=e.setGameOutcome,o=Object(r.useState)(!1),l=Object(u.a)(o,2),j=l[0],f=l[1];return j?null:Object(s.jsx)("button",{id:"start-button",onClick:function(){f(!0),function(){var e=0===D()?"red":"yellow";c(e),a("red"===e?"yellow":"red"),t.hasStarted=!0,t.turn=0===D()?"red":"yellow",n(Object(g.a)({},t)),i(null)}()},children:"Start Game"})},w=n(32),I=n.n(w),G=n(57),E=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t).fill("");return n},M=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].length-1;r>=0;){if(""===e[n][r]){t.push({x:n,y:r});break}r--}return t},T=function e(t,n,r,c,a,i,u,o,s){if(p(i,t,o,s))return 1e3+n;if(p(u,t,o,s))return-1e3-n;if(y(t,o,s))return 0;if(0===n)return Math.floor(200*Math.random())-100;var l=M(t);if(a){for(var j=-1/0,f=0;f<l.length;f++){t[l[f].x][l[f].y]=i;var b=e(t,n-1,r,c,!1,i,u,o,s);if(j=Math.max(j,b),r=Math.max(r,b),t[l[f].x][l[f].y]="",r>=c)break}return j}for(var d=1/0,m=0;m<l.length;m++){t[l[m].x][l[m].y]=u;var h=e(t,n-1,r,c,!0,i,u,o,s);if(d=Math.min(d,h),c=Math.min(c,h),t[l[m].x][l[m].y]="",c<=r)break}return d},_=function(e){var t=e.depth,n=e.game,c=e.setGame,a=e.playerColour,i=e.aiColour,o=e.setGameOutcome,l=Object(r.useState)(E(7,6)),j=Object(u.a)(l,2),f=j[0],b=j[1];Object(r.useEffect)((function(){n.hasStarted&&b(E(7,6))}),[n.hasStarted]),Object(r.useEffect)((function(){n.hasStarted&&n.turn===i&&function(){for(var e,n=-1/0,r=-1/0,c=M(f),u=0;u<c.length;u++){f[c[u].x][c[u].y]=i;var o=T(f,t-1,r,1/0,!1,i,a,7,6);o>n&&(n=o,e=c[u]),r=Math.max(r,o),f[c[u].x][c[u].y]=""}d(i,e.y,e.x)}()}),[f]);var d=function(){var e=Object(G.a)(I.a.mark((function e(t,r,i){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f[i][r]=t,b(Object(v.a)(f)),p(t,f,7,6)?(n.hasStarted=!1,o(t===a?"You won!":"You lost!")):y(f,7,6)?(n.hasStarted=!1,o("Draw")):n.turn="red"===n.turn?"yellow":"red",c(Object(g.a)({},n));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{id:"board",children:f.map((function(e,t){return Object(s.jsx)("div",{className:"col",onClick:function(){return function(e){if(n.hasStarted&&n.turn===a)for(var t=5;t>=0;){if(""===f[e][t])return void d(a,t,e);t--}}(t)},children:f[t].map((function(e,n){return function(e,t,n){return""!==e?Object(s.jsx)("div",{className:"cell "+e},t+","+n):Object(s.jsx)("div",{className:"cell"},t+","+n)}(e,t,n)}))},t)}))})},A=(n(101),function(e){var t=e.difficulty,n=e.setDifficulty,c=Object(r.useState)({hasStarted:!1}),a=Object(u.a)(c,2),i=a[0],o=a[1],l=Object(r.useState)(null),j=Object(u.a)(l,2),f=j[0],b=j[1],d=Object(r.useState)(null),m=Object(u.a)(d,2),h=m[0],O=m[1],x=Object(r.useState)(null),g=Object(u.a)(x,2),v=g[0],p=g[1];return Object(s.jsxs)("div",{id:"singleplayer",children:[Object(s.jsx)("h2",{children:t.string}),v&&Object(s.jsx)("h2",{children:v}),!i.hasStarted&&Object(s.jsx)(N,{game:i,setGame:o,setYourColour:b,setAiColour:O,setGameOutcome:p}),i.hasStarted&&(i.turn===f?Object(s.jsx)("h2",{className:f+" highlighted",children:"Your turn!"}):Object(s.jsx)("h2",{className:h+" highlighted",children:"AI's turn!"})),Object(s.jsx)(_,{depth:t.depth,game:i,setGame:o,playerColour:f,aiColour:h,setGameOutcome:p}),Object(s.jsx)("button",{id:"back",onClick:function(){return n(null)},children:"Change difficulty"})]})}),Y=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1];return null===n?Object(s.jsxs)("div",{id:"menu",children:[Object(s.jsx)("h1",{children:"Select Difficulty"}),Object(s.jsx)("button",{onClick:function(){return c({depth:2,string:"Easy"})},children:"Easy"}),Object(s.jsx)("button",{onClick:function(){return c({depth:4,string:"Medium"})},children:"Medium"}),Object(s.jsx)("button",{onClick:function(){return c({depth:7,string:"Hard"})},children:"Hard"})]}):Object(s.jsx)(A,{difficulty:n,setDifficulty:c})},P=function(){var e=Object(o.h)(),t=Object(o.g)();return"/"===e.pathname?null:Object(s.jsx)("button",{id:"link",onClick:function(){return t.replace("/")},children:"Back to main menu..."})};n(102);var F=function(){var e=Object(o.g)(),t=Object(r.useState)({}),n=Object(u.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)([]),j=Object(u.a)(i,2),m=j[0],h=j[1];return Object(r.useEffect)((function(){f.on("update-game",(function(e){return a(e)})),f.on("update-players",(function(e){return h(e)})),f.on("update-game-and-players",(function(e){var t=e.game,n=e.players;a(t),h(n)})),f.on("join-game",(function(){return e.replace("/game/play")}))}),[e]),Object(s.jsxs)("div",{children:[Object(s.jsx)(P,{}),Object(s.jsxs)(o.d,{children:[Object(s.jsx)(o.b,{exact:!0,path:"/",component:l}),Object(s.jsx)(o.b,{exact:!0,path:"/game/ai",component:Y}),Object(s.jsx)(o.b,{exact:!0,path:"/game/create",component:b}),Object(s.jsx)(o.b,{exact:!0,path:"/game/join",component:d}),Object(s.jsx)(o.b,{exact:!0,path:"/game/play",children:Object(s.jsx)(C,{game:c,setGame:a,players:m,setPlayers:h})})]})]})},J=n(18);i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(J.a,{children:Object(s.jsx)(F,{})})}),document.getElementById("root"))},33:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.fb2b1cc8.chunk.js.map
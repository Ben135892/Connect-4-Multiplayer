(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(54),i=n.n(a),o=n(2),u=n(3),s=(n(33),n(0)),l=function(e){var t=e.history;return Object(s.jsxs)("div",{id:"menu",children:[Object(s.jsx)("h1",{children:"Connect 4 Online"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/ai")},children:"Play against AI"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/create")},children:"Create Game"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/join")},children:"Join Game"})]})},j=n(55),f=n.n(j)()(),d=(n(50),function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(o.a)(a,2),u=i[0],l=i[1];return u?null:Object(s.jsxs)("div",{className:"form",children:[Object(s.jsx)("h1",{children:"Create Game"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(!0),f.emit("create-game",{nickName:n})},children:[Object(s.jsx)("label",{htmlFor:"nickName",children:"Enter Nick Name"}),Object(s.jsx)("input",{autoComplete:"off",onChange:function(e){c(e.target.value)},type:"text",id:"nickName"}),Object(s.jsx)("button",{children:"Submit"})]})]})}),b=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),u=i[0],l=i[1],j=Object(r.useState)(!1),d=Object(o.a)(j,2),b=d[0],m=d[1],h=Object(r.useState)(!1),O=Object(o.a)(h,2),x=O[0],g=O[1];Object(r.useEffect)((function(){return f.on("error",(function(e){m(e),g(!1)})),function(){return f.off("error")}}),[]);return x?null:Object(s.jsxs)("div",{className:"form",children:[Object(s.jsx)("h1",{children:"Join Game"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(!0),f.emit("join-game",{nickName:n,gameID:u})},children:[b&&Object(s.jsx)("div",{class:"error",children:b}),Object(s.jsx)("label",{htmlFor:"nickName",children:"Enter Nick Name"}),Object(s.jsx)("input",{autoComplete:"off",value:n,onChange:function(e){c(e.target.value)},type:"text",id:"nickName"}),Object(s.jsx)("label",{htmlFor:"gameID",children:"Enter Room ID"}),Object(s.jsx)("input",{autoComplete:"off",value:u,onChange:function(e){l(e.target.value)},type:"text",id:"gameID"}),Object(s.jsx)("button",{children:"Submit"})]})]})},m=(n(93),function(e){var t=e.gameID,n=e.nickName,c=Object(r.useRef)(null),a=Object(r.useState)(""),i=Object(o.a)(a,2),u=i[0],l=i[1],j=Object(r.useState)([]),d=Object(o.a)(j,2),b=d[0],m=d[1];Object(r.useEffect)((function(){return f.on("message",(function(e){m((function(t){return t.concat([e])}))})),function(){return f.off("message")}}),[]),Object(r.useEffect)((function(){c.current.scrollIntoView({behavior:"smooth"})}),[b]);return Object(s.jsxs)("div",{id:"message-div",children:[Object(s.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==u){var r=n+": "+u;m((function(e){return e.concat([r])})),l(""),f.emit("message",{gameID:t,message:r})}},children:[Object(s.jsx)("label",{htmlFor:"message",children:"Send Message: "}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{autoComplete:"off",type:"text",id:"message",value:u,onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("button",{children:"Send"})]}),Object(s.jsxs)("div",{id:"messages",children:[b.map((function(e,t){return Object(s.jsx)("p",{children:e},t)})),Object(s.jsx)("div",{ref:c})]})]})}),h=(n(94),function(e){var t=e.playerID,n=e.players;return Object(s.jsxs)("div",{id:"playerlist",children:[Object(s.jsx)("h1",{children:"Players: "}),n.map((function(e){return function(e){return""!==e.colour?Object(s.jsx)("h2",{className:e.colour+" highlighted",children:e.nickName+(e._id===t?" (you)":"")},e._id.toString()):Object(s.jsx)("h2",{className:"highlighted",children:e.nickName+(e._id===t?" (you)":"")},e._id.toString())}(e)}))]})}),O=(n(51),function(e){var t=e.gameID,n=Object(r.useState)(!1),c=Object(o.a)(n,2),a=c[0],i=c[1];return a?null:Object(s.jsx)("button",{id:"start-button",onClick:function(){i(!0),f.emit("start-game",{gameID:t})},children:"Start Game"})}),x=function(e){var t=e.game,n=e.player,r=e.gameOutcome;return Object(s.jsxs)("div",{id:"info",children:[r?Object(s.jsx)("h2",{children:r}):null,t.hasStarted&&(n.colour===t.turn?Object(s.jsx)("h2",{className:n.colour+" highlighted",children:"Your turn"}):Object(s.jsx)("h2",{className:(n.colour,("yellow"===n.colour?"red":"yellow")+" highlighted"),children:"Opponent's turn"})),!t.hasStarted&&(2===t.players.length?n.isHosting?Object(s.jsx)(O,{gameID:t._id.toString()}):Object(s.jsx)("h2",{children:"Waiting for host to start..."}):Object(s.jsx)("h2",{children:"Waiting for another player..."}))]})},g=n(15),v=n(24),p=(n(52),function(e,t,n,r){for(var c=0;c<n;c++)for(var a=0;a<=r-4;a++)if(t[c][a]===e&&t[c][a+1]===e&&t[c][a+2]===e&&t[c][a+3]===e)return!0;for(var i=0;i<r;i++)for(var o=0;o<=n-4;o++)if(t[o][i]===e&&t[o+1][i]===e&&t[o+2][i]===e&&t[o+3][i]===e)return!0;for(var u=0;u<=n-4;u++)for(var s=0;s<=r-4;s++)if(t[u][s]===e&&t[u+1][s+1]===e&&t[u+2][s+2]===e&&t[u+3][s+3]===e)return!0;for(var l=3;l<n;l++)for(var j=0;j<=r-4;j++)if(t[l][j]===e&&t[l-1][j+1]===e&&t[l-2][j+2]===e&&t[l-3][j+3]===e)return!0;return!1}),y=function(e,t,n){for(var r=0;r<t;r++)for(var c=0;c<n;c++)if(""===e[r][c])return!1;return!0},S=function(e){var t=e.game,n=e.setGame,c=e.player,a=e.setGameOutcome,i=e.timer,u=e.setTimer,l=function(){for(var e=new Array(7),t=0;t<7;t++)e[t]=new Array(6).fill("");return e},j=Object(r.useState)(l()),d=Object(o.a)(j,2),b=d[0],m=d[1];Object(r.useEffect)((function(){return f.on("restart",(function(){a(null),m(l())})),f.on("update-board",(function(e){var t=e.row,n=e.col,r=e.colour;m((function(e){return e[n][t]=r,e}))})),function(){f.off("restart"),f.off("update-board")}}),[a]),Object(r.useEffect)((function(){if(t.hasStarted&&c.colour===t.turn&&i<=0)for(;;)for(var e=5,n=Math.floor(7*Math.random());e>=0;){if(""===b[n][e])return void h(e,n);e--}}));var h=function(e,r){b[r][e]=c.colour,m(Object(v.a)(b)),f.emit("update-board",{gameID:t._id.toString(),row:e,col:r,colour:c.colour}),p(c.colour,b,7,6)?(t.hasStarted=!1,a("You won!"),f.emit("game-over",{gameID:t._id.toString(),result:"You lost!"})):y(b,7,6)?(t.hasStarted=!1,a("Draw"),f.emit("game-over",{gameID:t._id.toString(),result:"Draw!"})):(t.turn="red"===t.turn?"yellow":"red",f.emit("change-turn",{gameID:t._id.toString()}),u(t.turnTime)),n(Object(g.a)({},t))};return Object(s.jsx)("div",{id:"board",children:b.map((function(e,n){return Object(s.jsx)("div",{className:"col",onClick:function(){return function(e){if(t.hasStarted&&t.turn===c.colour)for(var n=5;n>=0;){if(""===b[e][n])return void h(n,e);n--}}(n)},children:b[n].map((function(e,t){return function(e,t,n){return""!==e?Object(s.jsx)("div",{className:"cell "+e},t+","+n):Object(s.jsx)("div",{className:"cell"},t+","+n)}(e,n,t)}))},n)}))})},k=function(e){var t=e.timer,n=e.setTimer;return Object(r.useEffect)((function(){var e=setTimeout((function(){n((function(e){return e-1}))}),1e3);return function(){return clearTimeout(e)}})),Object(s.jsx)("h2",{children:t<0?0:t})},C=(n(95),function(e){var t=e.game,n=e.setGame,c=e.players,a=function(e){for(var t=0;t<e.length;t++)if(e[t].socketID===f.id)return e[t];return{_id:""}}(c),i=Object(r.useState)(null),l=Object(o.a)(i,2),j=l[0],d=l[1],b=Object(r.useState)(null),O=Object(o.a)(b,2),g=O[0],v=O[1];return Object(r.useEffect)((function(){return f.on("game-over",(function(e){return d(e)})),f.on("update-timer",(function(e){return v(e)})),f.on("remove-timer",(function(){return v(null)})),function(){f.off("game-over"),f.off("update-timer"),f.off("remove-timer"),""!==a._id&&f.emit("leave-game")}}),[a._id]),""===a._id?Object(s.jsx)(u.a,{to:"/"}):Object(s.jsxs)("div",{id:"game",children:[Object(s.jsxs)("h2",{children:["Game Code: ",t._id.toString()]}),Object(s.jsx)(x,{game:t,player:a,gameOutcome:j}),t.hasStarted&&Object(s.jsx)(k,{timer:g,setTimer:v}),Object(s.jsxs)("div",{id:"main",children:[Object(s.jsx)(h,{playerID:a._id,players:c}),Object(s.jsx)(S,{game:t,setGame:n,player:a,setGameOutcome:d,timer:g,setTimer:v}),Object(s.jsx)(m,{gameID:t._id.toString(),nickName:a.nickName})]})]})}),N=function(){return Math.floor(2*Math.random())},D=function(e){var t=e.game,n=e.setGame,c=e.setYourColour,a=e.setAiColour,i=e.setGameOutcome,u=Object(r.useState)(!1),l=Object(o.a)(u,2),j=l[0],f=l[1];return j?null:Object(s.jsx)("button",{id:"start-button",onClick:function(){f(!0),function(){var e=0===N()?"red":"yellow";c(e),a("red"===e?"yellow":"red"),t.hasStarted=!0,t.turn=0===N()?"red":"yellow",n(Object(g.a)({},t)),i(null)}()},children:"Start Game"})},w=n(32),G=n.n(w),I=n(57),E=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t).fill("");return n},_=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].length-1;r>=0;){if(""===e[n][r]){t.push({x:n,y:r});break}r--}return t},M=function e(t,n,r,c,a,i,o,u,s){if(p(i,t,u,s))return 1e3+n;if(p(o,t,u,s))return-1e3-n;if(y(t,u,s))return 0;if(0===n)return Math.floor(200*Math.random())-100;var l=_(t);if(a){for(var j=-1/0,f=0;f<l.length;f++){t[l[f].x][l[f].y]=i;var d=e(t,n-1,r,c,!1,i,o,u,s);if(j=Math.max(j,d),r=Math.max(r,d),t[l[f].x][l[f].y]="",r>=c)break}return j}for(var b=1/0,m=0;m<l.length;m++){t[l[m].x][l[m].y]=o;var h=e(t,n-1,r,c,!0,i,o,u,s);if(b=Math.min(b,h),c=Math.min(c,h),t[l[m].x][l[m].y]="",c<=r)break}return b},A=function(e){var t=e.depth,n=e.game,c=e.setGame,a=e.playerColour,i=e.aiColour,u=e.setGameOutcome,l=Object(r.useState)(E(7,6)),j=Object(o.a)(l,2),f=j[0],d=j[1];Object(r.useEffect)((function(){n.hasStarted&&d(E(7,6))}),[n.hasStarted]),Object(r.useEffect)((function(){n.hasStarted&&n.turn===i&&function(){for(var e,n=-1/0,r=-1/0,c=_(f),o=0;o<c.length;o++){f[c[o].x][c[o].y]=i;var u=M(f,t-1,r,1/0,!1,i,a,7,6);u>n&&(n=u,e=c[o]),r=Math.max(r,u),f[c[o].x][c[o].y]=""}b(i,e.y,e.x)}()}),[f]);var b=function(){var e=Object(I.a)(G.a.mark((function e(t,r,i){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f[i][r]=t,d(Object(v.a)(f)),p(t,f,7,6)?(n.hasStarted=!1,u(t===a?"You won!":"You lost!")):y(f,7,6)?(n.hasStarted=!1,u("Draw")):n.turn="red"===n.turn?"yellow":"red",c(Object(g.a)({},n));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{id:"board",children:f.map((function(e,t){return Object(s.jsx)("div",{className:"col",onClick:function(){return function(e){if(n.hasStarted&&n.turn===a)for(var t=5;t>=0;){if(""===f[e][t])return void b(a,t,e);t--}}(t)},children:f[t].map((function(e,n){return function(e,t,n){return""!==e?Object(s.jsx)("div",{className:"cell "+e},t+","+n):Object(s.jsx)("div",{className:"cell"},t+","+n)}(e,t,n)}))},t)}))})},Y=(n(101),function(e){var t=e.difficulty,n=e.setDifficulty;console.log(t);var c=Object(r.useState)({hasStarted:!1}),a=Object(o.a)(c,2),i=a[0],u=a[1],l=Object(r.useState)(null),j=Object(o.a)(l,2),f=j[0],d=j[1],b=Object(r.useState)(null),m=Object(o.a)(b,2),h=m[0],O=m[1],x=Object(r.useState)(null),g=Object(o.a)(x,2),v=g[0],p=g[1];return Object(s.jsxs)("div",{id:"singleplayer",children:[Object(s.jsx)("h2",{children:t.string}),v&&Object(s.jsx)("h2",{children:v}),!i.hasStarted&&Object(s.jsx)(D,{game:i,setGame:u,setYourColour:d,setAiColour:O,setGameOutcome:p}),i.hasStarted&&(i.turn===f?Object(s.jsx)("h2",{className:f+" highlighted",children:"Your turn!"}):Object(s.jsx)("h2",{className:h+" highlighted",children:"AI's turn!"})),Object(s.jsx)(A,{depth:t.depth,game:i,setGame:u,playerColour:f,aiColour:h,setGameOutcome:p}),Object(s.jsx)("button",{id:"back",onClick:function(){return n(null)},children:"Change difficulty"})]})}),T=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1];return null===n?Object(s.jsxs)("div",{id:"menu",children:[Object(s.jsx)("h1",{children:"Select Difficulty"}),Object(s.jsx)("button",{onClick:function(){return c({depth:3,string:"Easy"})},children:"Easy"}),Object(s.jsx)("button",{onClick:function(){return c({depth:5,string:"Medium"})},children:"Medium"}),Object(s.jsx)("button",{onClick:function(){return c({depth:7,string:"Hard"})},children:"Hard"})]}):Object(s.jsx)(Y,{difficulty:n,setDifficulty:c})},F=function(){var e=Object(u.h)(),t=Object(u.g)();return"/"===e.pathname?null:Object(s.jsx)("button",{id:"link",onClick:function(){return t.replace("/")},children:"Back to main menu..."})};n(102);var J=function(){var e=Object(u.g)(),t=Object(r.useState)({}),n=Object(o.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)([]),j=Object(o.a)(i,2),m=j[0],h=j[1];return Object(r.useEffect)((function(){f.on("update-game",(function(e){return a(e)})),f.on("update-players",(function(e){return h(e)})),f.on("update-game-and-players",(function(e){var t=e.game,n=e.players;a(t),h(n)})),f.on("join-game",(function(){return e.replace("/game/play")}))}),[e]),Object(s.jsxs)("div",{children:[Object(s.jsx)(F,{}),Object(s.jsxs)(u.d,{children:[Object(s.jsx)(u.b,{exact:!0,path:"/",component:l}),Object(s.jsx)(u.b,{exact:!0,path:"/game/ai",component:T}),Object(s.jsx)(u.b,{exact:!0,path:"/game/create",component:d}),Object(s.jsx)(u.b,{exact:!0,path:"/game/join",component:b}),Object(s.jsx)(u.b,{exact:!0,path:"/game/play",children:Object(s.jsx)(C,{game:c,setGame:a,players:m,setPlayers:h})})]})]})},H=n(18);i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(H.a,{children:Object(s.jsx)(J,{})})}),document.getElementById("root"))},33:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.ca51bf16.chunk.js.map
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(53),i=n.n(a),o=n(2),u=n(3),s=(n(32),n(0)),l=function(e){var t=e.history;return Object(s.jsxs)("div",{id:"menu",children:[Object(s.jsx)("h1",{children:"Connect 4 Online"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/ai")},children:"Play against AI"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/create")},children:"Create Game"}),Object(s.jsx)("button",{onClick:function(){return t.replace("/game/join")},children:"Join Game"})]})},j=n(54),f=n.n(j)()("http://localhost:3001"),d=(n(49),function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(o.a)(a,2),u=i[0],l=i[1];return u?null:Object(s.jsxs)("div",{className:"form",children:[Object(s.jsx)("h1",{children:"Create Game"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(!0),f.emit("create-game",{nickName:n})},children:[Object(s.jsx)("label",{htmlFor:"nickName",children:"Enter Nick Name"}),Object(s.jsx)("input",{autoComplete:"off",onChange:function(e){c(e.target.value)},type:"text",id:"nickName"}),Object(s.jsx)("button",{children:"Submit"})]})]})}),b=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),u=i[0],l=i[1],j=Object(r.useState)(!1),d=Object(o.a)(j,2),b=d[0],m=d[1],h=Object(r.useState)(!1),O=Object(o.a)(h,2),x=O[0],g=O[1];Object(r.useEffect)((function(){return f.on("error",(function(e){m(e),g(!1)})),function(){return f.off("error")}}),[]);return x?null:Object(s.jsxs)("div",{className:"form",children:[Object(s.jsx)("h1",{children:"Join Game"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(!0),f.emit("join-game",{nickName:n,joinID:u})},children:[b&&Object(s.jsx)("div",{class:"error",children:b}),Object(s.jsx)("label",{htmlFor:"nickName",children:"Enter Nick Name"}),Object(s.jsx)("input",{autoComplete:"off",value:n,onChange:function(e){c(e.target.value)},type:"text",id:"nickName"}),Object(s.jsx)("label",{htmlFor:"gameID",children:"Enter Room ID"}),Object(s.jsx)("input",{autoComplete:"off",value:u,onChange:function(e){l(e.target.value)},type:"text",id:"gameID"}),Object(s.jsx)("button",{children:"Submit"})]})]})},m=(n(91),function(e){var t=e.gameID,n=e.nickName,c=Object(r.useState)(""),a=Object(o.a)(c,2),i=a[0],u=a[1],l=Object(r.useState)([]),j=Object(o.a)(l,2),d=j[0],b=j[1],m=Object(r.useRef)(null);Object(r.useEffect)((function(){return f.on("message",(function(e){b((function(t){return t.concat([e])}))})),function(){return f.off("message")}}),[]),Object(r.useEffect)((function(){m.current.scrollIntoView({behavior:"smooth"})}),[d]);return Object(s.jsxs)("div",{id:"message-div",children:[Object(s.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==i){var r=n+": "+i;b((function(e){return e.concat([r])})),u(""),f.emit("message",{gameID:t,message:r})}},children:[Object(s.jsx)("label",{htmlFor:"message",children:"Send Message: "}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{autoComplete:"off",type:"text",id:"message",value:i,onChange:function(e){return u(e.target.value)}}),Object(s.jsx)("button",{children:"Send"})]}),Object(s.jsxs)("div",{id:"messages",children:[d.map((function(e,t){return Object(s.jsx)("p",{children:e},t)})),Object(s.jsx)("div",{ref:m})]})]})}),h=(n(92),function(e){var t=e.playerID,n=e.players;return Object(s.jsxs)("div",{id:"playerlist",children:[Object(s.jsx)("h1",{children:"Players: "}),n.map((function(e){return Object(s.jsx)("h2",{className:"highlighted "+e.colour,children:e.nickName+(e._id.toString()===t.toString()?" (you)":"")},e._id.toString())}))]})}),O=(n(50),function(e){var t=e.gameID,n=Object(r.useState)(!1),c=Object(o.a)(n,2),a=c[0],i=c[1];return a?null:Object(s.jsx)("button",{id:"start-button",onClick:function(){i(!0),f.emit("start-game",{gameID:t})},children:"Start Game"})}),x=function(e){var t=e.game,n=e.player,r=e.gameOutcome;return Object(s.jsxs)("div",{id:"info",children:[r?Object(s.jsx)("h2",{children:r}):null,t.hasStarted&&(n.colour===t.turn?Object(s.jsx)("h2",{className:n.colour+" highlighted",children:"Your turn"}):Object(s.jsx)("h2",{className:(n.colour,("yellow"===n.colour?"red":"yellow")+" highlighted"),children:"Opponent's turn"})),!t.hasStarted&&(2===t.players.length?n.isHosting?Object(s.jsx)(O,{gameID:t._id}):Object(s.jsx)("h2",{children:"Waiting for host to start..."}):Object(s.jsx)("h2",{children:"Waiting for another player..."}))]})},g=n(15),v=n(24),p=(n(51),function(e,t,n,r){for(var c=0;c<n;c++)for(var a=0;a<=r-4;a++)if(t[c][a]===e&&t[c][a+1]===e&&t[c][a+2]===e&&t[c][a+3]===e)return!0;for(var i=0;i<r;i++)for(var o=0;o<=n-4;o++)if(t[o][i]===e&&t[o+1][i]===e&&t[o+2][i]===e&&t[o+3][i]===e)return!0;for(var u=0;u<=n-4;u++)for(var s=0;s<=r-4;s++)if(t[u][s]===e&&t[u+1][s+1]===e&&t[u+2][s+2]===e&&t[u+3][s+3]===e)return!0;for(var l=3;l<n;l++)for(var j=0;j<=r-4;j++)if(t[l][j]===e&&t[l-1][j+1]===e&&t[l-2][j+2]===e&&t[l-3][j+3]===e)return!0;return!1}),y=function(e,t,n){for(var r=0;r<t;r++)for(var c=0;c<n;c++)if(""===e[r][c])return!1;return!0},S=function(e,t,n){for(;;)for(var r=n-1,c=Math.floor(Math.random()*t);r>=0;){if(""===e[c][r])return{row:r,col:c};r--}},k=function(e){var t=e.game,n=e.setGame,c=e.playerColour,a=e.setGameOutcome,i=function(){for(var e=new Array(7),t=0;t<7;t++)e[t]=new Array(6).fill("");return e},u=Object(r.useState)(i()),l=Object(o.a)(u,2),j=l[0],d=l[1];Object(r.useEffect)((function(){return f.on("restart",(function(){a(null),d(i())})),f.on("update-board",(function(e){var t=e.row,n=e.col,r=e.colour;d((function(e){return e[n][t]=r,e}))})),function(){f.off("restart"),f.off("update-board")}}),[a]);Object(r.useEffect)((function(){return f.on("make-move",(function(e){return function(e){if(t.hasStarted&&e===t.turnID&&t.turn===c){var n=S(j,7,6);b(n.row,n.col)}}(e.turnID)})),function(){return f.off("make-move")}}));var b=function(e,r){j[r][e]=c,d(Object(v.a)(j)),f.emit("update-board",{gameID:t._id,row:e,col:r,colour:c}),p(c,j,7,6)?(t.hasStarted=!1,a("You won!"),f.emit("game-over",{gameID:t._id,result:"You lost!"})):y(j,7,6)?(t.hasStarted=!1,a("Draw"),f.emit("game-over",{gameID:t._id,result:"Draw!"})):(t.turn="red"===t.turn?"yellow":"red",f.emit("change-turn",{gameID:t._id})),n(Object(g.a)({},t))};return Object(s.jsx)("div",{id:"board",children:j.map((function(e,n){return Object(s.jsx)("div",{className:"col",onClick:function(){return function(e){if(t.hasStarted&&t.turn===c)for(var n=5;n>=0;){if(""===j[e][n])return void b(n,e);n--}}(n)},children:j[n].map((function(e,t){return Object(s.jsx)("div",{className:"cell "+e},n+","+t)}))},n)}))})},C=function(e){var t=e.game,n=Object(r.useState)(t.turnTime),c=Object(o.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){i(t.turnTime);var e=setInterval((function(){i((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[t.turnID,t.turn,t.turnTime,i]),Object(s.jsx)("h2",{children:a})},D=(n(93),function(e){var t=e.game,n=e.setGame,c=e.players,a=e.setPlayers,i=function(e){for(var t=0;t<e.length;t++)if(e[t].socketID===f.id)return e[t];return{_id:""}}(c),l=Object(r.useState)(null),j=Object(o.a)(l,2),d=j[0],b=j[1];return Object(r.useEffect)((function(){return f.on("game-over",(function(e){return b(e)})),function(){f.off("game-over"),f.off("update-timer"),""!==i._id&&(f.emit("leave-game"),n({}),a([]))}}),[i._id,n,a]),""===i._id?Object(s.jsx)(u.a,{to:"/"}):Object(s.jsxs)("div",{id:"game",children:[Object(s.jsxs)("h2",{children:["Game Code: ",t.joinID]}),Object(s.jsx)(x,{game:t,player:i,gameOutcome:d}),t.hasStarted&&Object(s.jsx)(C,{game:t}),Object(s.jsxs)("div",{id:"main",children:[Object(s.jsx)(h,{playerID:i._id,players:c}),Object(s.jsx)(k,{game:t,setGame:n,playerColour:i.colour,setGameOutcome:b}),Object(s.jsx)(m,{gameID:t._id,nickName:i.nickName})]})]})}),I=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t).fill("");return n},w=function(e,t,n){for(var r=[],c=0;c<t;c++)for(var a=n-1;a>=0;){if(""===e[c][a]){r.push({x:c,y:a});break}a--}return r},G=function e(t,n,r,c,a,i,o,u,s){if(p(i,t,u,s))return 1e3+n;if(p(o,t,u,s))return-1e3-n;if(y(t,u,s))return 0;if(0===n)return Math.floor(200*Math.random())-100;var l=w(t,u,s);if(a){for(var j=-1/0,f=0;f<l.length;f++){t[l[f].x][l[f].y]=i;var d=e(t,n-1,r,c,!1,i,o,u,s);if(j=Math.max(j,d),r=Math.max(r,d),t[l[f].x][l[f].y]="",r>=c)break}return j}for(var b=1/0,m=0;m<l.length;m++){t[l[m].x][l[m].y]=o;var h=e(t,n-1,r,c,!0,i,o,u,s);if(b=Math.min(b,h),c=Math.min(c,h),t[l[m].x][l[m].y]="",c<=r)break}return b},N=function(e,t,n,r,c,a){for(var i,o=-1/0,u=-1/0,s=w(e,n,r),l=0;l<s.length;l++){e[s[l].x][s[l].y]=c;var j=G(e,t-1,u,Infinity,!1,c,a,n,r);j>o&&(o=j,i=s[l]),u=Math.max(u,j),e[s[l].x][s[l].y]=""}return{row:i.y,col:i.x}},E=function(e){var t=e.depth,n=e.game,c=e.setGame,a=e.playerColour,i=e.setGameOutcome,u="red"===a?"yellow":"red",l=Object(r.useState)(I(7,6)),j=Object(o.a)(l,2),f=j[0],d=j[1];Object(r.useEffect)((function(){n.hasStarted&&d(I(7,6))}),[n.hasStarted]),Object(r.useEffect)((function(){if(n.hasStarted&&n.turn===u){var e=N(f,t,7,6,u,a);b(u,e.row,e.col)}}),[f]);var b=function(e,t,r){f[r][t]=e,d(Object(v.a)(f)),p(e,f,7,6)?(n.hasStarted=!1,i(e===a?"You won!":"You lost!")):y(f,7,6)?(n.hasStarted=!1,i("Draw")):n.turn="red"===n.turn?"yellow":"red",c(Object(g.a)({},n))};return Object(s.jsx)("div",{id:"board",children:f.map((function(e,t){return Object(s.jsx)("div",{className:"col",onClick:function(){return function(e){if(n.hasStarted&&n.turn===a)for(var t=5;t>=0;){if(""===f[e][t])return void b(a,t,e);t--}}(t)},children:f[t].map((function(e,n){return Object(s.jsx)("div",{className:"cell "+e},t+","+n)}))},t)}))})},M=function(){return Math.floor(2*Math.random())},_=function(e){var t=e.game,n=e.setGame,c=e.setPlayerColour,a=e.setGameOutcome,i=Object(r.useState)(!1),u=Object(o.a)(i,2),l=u[0],j=u[1];return l?null:Object(s.jsx)("button",{id:"start-button",onClick:function(){j(!0),function(){var e=0===M()?"red":"yellow";c(e),t.hasStarted=!0,t.turn=0===M()?"red":"yellow",n(Object(g.a)({},t)),a(null)}()},children:"Start Game"})},P=function(e){var t,n=e.game,r=e.setGame,c=e.playerColour,a=e.setPlayerColour,i=e.gameOutcome,o=e.setGameOutcome;return Object(s.jsxs)("div",{id:"info",children:[i&&Object(s.jsx)("h2",{children:i}),!n.hasStarted&&Object(s.jsx)(_,{game:n,setGame:r,setPlayerColour:a,setGameOutcome:o}),n.hasStarted&&(n.turn===c?Object(s.jsx)("h2",{className:"highlighted "+c,children:"Your turn!"}):Object(s.jsx)("h2",{className:"highlighted "+(t=c,"red"===t?"yellow":"red"),children:"AI's turn!"}))]})},A=(n(98),function(e){var t=e.difficulty,n=e.setDifficulty,c=Object(r.useState)({hasStarted:!1}),a=Object(o.a)(c,2),i=a[0],u=a[1],l=Object(r.useState)(null),j=Object(o.a)(l,2),f=j[0],d=j[1],b=Object(r.useState)(null),m=Object(o.a)(b,2),h=m[0],O=m[1];return Object(s.jsxs)("div",{id:"singleplayer",children:[Object(s.jsx)("h2",{children:t.string}),Object(s.jsx)(P,{game:i,setGame:u,playerColour:f,setPlayerColour:d,gameOutcome:h,setGameOutcome:O}),Object(s.jsx)(E,{depth:t.depth,game:i,setGame:u,playerColour:f,setGameOutcome:O}),Object(s.jsx)("button",{id:"back",onClick:function(){return n(null)},children:"Change difficulty"})]})}),Y=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1];return null===n?Object(s.jsxs)("div",{id:"menu",children:[Object(s.jsx)("h1",{children:"Select Difficulty"}),Object(s.jsx)("button",{onClick:function(){return c({depth:2,string:"Easy"})},children:"Easy"}),Object(s.jsx)("button",{onClick:function(){return c({depth:4,string:"Medium"})},children:"Medium"}),Object(s.jsx)("button",{onClick:function(){return c({depth:7,string:"Hard"})},children:"Hard"})]}):Object(s.jsx)(A,{difficulty:n,setDifficulty:c})},F=function(){var e=Object(u.h)(),t=Object(u.g)();return"/"===e.pathname?null:Object(s.jsx)("button",{id:"link",onClick:function(){return t.replace("/")},children:"Back to main menu..."})};n(99);var J=function(){var e=Object(u.g)(),t=Object(r.useState)({}),n=Object(o.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)([]),j=Object(o.a)(i,2),m=j[0],h=j[1];return Object(r.useEffect)((function(){f.on("update-game",(function(e){return a(e)})),f.on("update-players",(function(e){return h(e)})),f.on("update-game-and-players",(function(e){var t=e.game,n=e.players;a(t),h(n)})),f.on("join-game",(function(){return e.replace("/game/play")}))}),[e]),Object(s.jsxs)("div",{children:[Object(s.jsx)(F,{}),Object(s.jsxs)(u.d,{children:[Object(s.jsx)(u.b,{exact:!0,path:"/",component:l}),Object(s.jsx)(u.b,{exact:!0,path:"/game/ai",component:Y}),Object(s.jsx)(u.b,{exact:!0,path:"/game/create",component:d}),Object(s.jsx)(u.b,{exact:!0,path:"/game/join",component:b}),Object(s.jsx)(u.b,{exact:!0,path:"/game/play",children:Object(s.jsx)(D,{game:c,setGame:a,players:m,setPlayers:h})})]})]})},H=n(18);i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(H.a,{children:Object(s.jsx)(J,{})})}),document.getElementById("root"))},32:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.20492db7.chunk.js.map